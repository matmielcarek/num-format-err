{"ast":null,"code":"var _jsxFileName = \"/Users/Mateusz/Documents/Kodowanie/public_html/en/mat/wp-content/reactpress/apps/num-format-err/src/components/calculator.jsx\";\nimport React, { Component } from \"react\";\nimport Selector from \"./selector\";\nimport NumForm from \"./numform\"; // function BoilingVerdict(props) {\n//   if (props.celsius >= 100) {\n//     return <p>The water would boil.</p>;\n//   }\n//   return <p>The water would not boil.</p>;\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction rnSig(val, absErr) {\n  //round value to appropriate count of significant digits based on absolute error\n  if (absErr > 0 && absErr < val) {\n    const t = Math.ceil(Math.log10(0.5 / absErr)); //calc number of fractional significant digits based on absolute error\n\n    const ord = Math.floor(Math.log10(val)); //calc order of magnitude of the number\n\n    const sig = ord + t; //calc number of significant digits by adding t to order of magnitude of the number\n    // const exp_n = Math.floor(Math.log10(Math.abs(val))) + 1 - sig; //calc n-exponent for rounding the number\n    // val = (10 ** exp_n) * Math.round(val / (10 ** exp_n))\n\n    if (t >= 0) {\n      val = val.toPrecision(sig); //does the same as above - rounds to specified count of significant digits\n\n      val = parseFloat(val).toFixed(t); //keep decimal to match error (concat \"0\" where needed)\n\n      absErr = absErr.toFixed(t); //round absolute error to appropriate decimal places (to match val)\n    } else {\n      val = Math.round(val / 10 ** (-t + 1)) * 10 ** (-t + 1);\n      absErr = Math.round(absErr / 10 ** -t) * 10 ** -t;\n    } // absErr = Math.round((absErr + Number.EPSILON) * 100) / 100 ///alternative is toPrecision(), much faster\n\n\n    return {\n      val: val,\n      absErr: absErr,\n      sig: sig === Infinity ? 0 : sig,\n      t: t === Infinity ? 0 : t\n    };\n  } else {\n    return {\n      val: val,\n      absErr: \"\",\n      sig: 1,\n      t: 1\n    };\n  }\n}\n\nfunction ConstructString(val, err, errType, sign, notation) {\n  //check if inputs can be read as numbers\n  if (isNaN(parseFloat(val)) || isNaN(parseFloat(err))) {\n    return \"Please specify number and error: i.e. 1234 and 0.04\";\n  } //convert user ipnut to float\n\n\n  val = parseFloat(val);\n  err = parseFloat(err);\n  let absErr = 0,\n      resString = \"\"; //calculate relative and absolute error\n\n  if (errType === \"Rel.\") {\n    absErr = val * err;\n  } else {\n    absErr = err;\n  }\n\n  if (absErr > 0 && absErr < val) {\n    //round value to appropriate count of significant digits based on absolute error\n    const num = rnSig(val, absErr); //read data from object returned by function rnSig\n\n    const valStr = num.val; //formatted string\n\n    const absErrStr = num.absErr; //formatted string\n\n    val = parseFloat(val); //rounded fp number\n\n    absErr = parseFloat(absErr); //rounded fp number\n\n    const relErrDigits = (absErr / 10 ** Math.floor(Math.log10(absErr))).toFixed(0); //absolute error in form of string of least significant digits\n\n    const sig = num.sig;\n    const t = num.t;\n\n    if (sign === \"±\") {\n      if (notation === \"Sci.\") {\n        resString = val.toExponential() + sign + absErr.toExponential();\n      } else {\n        resString = valStr + sign + absErrStr;\n      }\n    } else {\n      if (notation === \"Sci.\") {\n        resString = val.toExponential() + \"(\" + relErrDigits + \")\";\n      } else {\n        resString = val + \"(\" + relErrDigits + \")\";\n      }\n    }\n\n    return resString;\n  } else {\n    return \"Number shall be greater than its absolute error!\";\n  }\n}\n\n_c = ConstructString;\n\nclass Calculator extends React.Component {\n  constructor(props) {\n    super(props); // this.handleValChange = this.handleValChange.bind(this); // used arrow functions instead\n    // this.handleErrChange = this.handleErrChange.bind(this); // used arrow functions instead\n\n    this.handleValChange = val => {\n      this.setState({\n        val\n      }); // this.setState({ str });\n    };\n\n    this.handleErrChange = err => {\n      this.setState({\n        err\n      }); // this.setState({ str });\n    };\n\n    this.handleErrTypeChange = errType => {\n      this.setState({\n        errType\n      });\n    };\n\n    this.handleSignChange = sign => {\n      this.setState({\n        sign\n      });\n    };\n\n    this.handleNotationChange = notation => {\n      this.setState({\n        notation\n      });\n    };\n\n    this.handleResultChange = str => {\n      this.setState({\n        str\n      });\n    };\n\n    this.state = {\n      val: 1212.1212,\n      err: 49,\n      errType: \"Abs.\",\n      notation: \"Std.\",\n      sign: \"±\",\n      selectors: [{\n        id: 1,\n        lab: \"Error type:\",\n        opt1: \"Rel.\",\n        opt2: \"Abs.\"\n      }, {\n        id: 2,\n        lab: \"Number notation:\",\n        opt1: \"Std.\",\n        opt2: \"Sci.\"\n      }, {\n        id: 3,\n        lab: \"Error notation:\",\n        opt1: \"±\",\n        opt2: \"()\"\n      }],\n      forms: [{\n        id: 1,\n        lab: \"Number to format:\",\n        plHold: \"i.e. 1.23E+3 or 1230\",\n        prep: \"\",\n        mess: \"Use dot [.] or comma [,] as a decimal separator.\",\n        readonly: 0\n      }, {\n        id: 2,\n        lab: \"Error:\",\n        plHold: \"i.e. 3E-2 or 0.03\",\n        prep: \"±\",\n        mess: \"\",\n        readonly: 0\n      }, {\n        id: 3,\n        lab: \"Formatted number:\",\n        plHold: \"\",\n        prep: \"\",\n        mess: \"\",\n        readonly: 1\n      } //inValue: \"\",\n      ]\n    };\n  }\n\n  // Render method\n  render() {\n    const val = this.state.val;\n    const err = this.state.err;\n    const errType = this.state.errType;\n    const sign = this.state.sign;\n    const notation = this.state.notation;\n    const str = ConstructString(val, err, errType, sign, notation);\n    return (\n      /*#__PURE__*/\n      //IMPORTANT! Bulma's grid system is used to compy with Wordpress theme. Bootstrap is used for styling components.\n      _jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-9 has-text-justified is-hidden-mobile\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"This tool formats given number so that it is rounded to appropiate number of significant digits based on given uncertainty of the value. If you are interested in formal and mathematical background, please visit the \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"https://mmielcarek.com/en/mat/rounding_numbers\",\n                children: \" blog.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 68\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column has-text-right\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: this.handleCalc //onDelete is a property of Counter component called in Counters component.\n              // Here only the property onDelete of the counter, defined in counters component is called - <raising event handlers>\n              // The reference must be given as an arrow function, as we need to pass an id of the counter to be deleted.\n              // If instead of \"this.props.counter.id\" we would add 1, always counter of id 1 would be deleted.\n              ,\n              className: \"btn btn-warning w-100\",\n              children: \"Clear input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-6\",\n            children: /*#__PURE__*/_jsxDEV(NumForm, {\n              form: this.state.forms[0],\n              onInputChange: this.handleValChange,\n              inp: val\n            }, 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column\",\n            children: /*#__PURE__*/_jsxDEV(NumForm, {\n              form: this.state.forms[1],\n              onInputChange: this.handleErrChange,\n              inp: err\n            }, 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column\",\n            children: /*#__PURE__*/_jsxDEV(Selector, {\n              selector: this.state.selectors[0],\n              onSelectionChange: this.handleErrTypeChange\n            }, 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-6\",\n            children: /*#__PURE__*/_jsxDEV(NumForm, {\n              form: this.state.forms[2],\n              onSelectionChange: this.handleResultChange,\n              inp: str\n            }, 2, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column\",\n            children: /*#__PURE__*/_jsxDEV(Selector, {\n              selector: this.state.selectors[1],\n              onSelectionChange: this.handleNotationChange\n            }, 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column\",\n            children: /*#__PURE__*/_jsxDEV(Selector, {\n              selector: this.state.selectors[2],\n              onSelectionChange: this.handleSignChange\n            }, 2, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"w-100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }, this)\n    );\n  } // Method to change button classes on click to make it a selector.\n\n\n  changeButtonClass() {\n    let classes = \"btn btn-sm btn-\";\n    classes += this.props.counter.value === 0 ? \"primary\" : \"secondary\"; // If counter value is 0 add \"Warning\", else add \"primary\".\n\n    return classes;\n  } // Method to format counter based on value.\n\n\n  formatCount() {\n    // Object destructuring - picking a single property of an object and store it in a const.\n    const {\n      value: value\n    } = this.props.counter;\n    return value === 0 ? \"Zero\" : value; // Instead of plain text \"Zero\" it is also possible to return a JSX expression: <h1>Zero</h1>.\n    // Constant (const) can also store JSX expression. const x = <h1>Zero</h1>\n  } ///////////////////////////////////////////////////////////\n  //   //[USAGE OF <componentDidMount>]\n  //   // Called after component is rendered into the DOM. Place to call data form the server.\n  //   componentDidMount() {\n  // //Ajax Call\n  //     this.setState({data from the server})\n  //   }\n\n\n}\n\nexport default Calculator;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConstructString\");","map":{"version":3,"sources":["/Users/Mateusz/Documents/Kodowanie/public_html/en/mat/wp-content/reactpress/apps/num-format-err/src/components/calculator.jsx"],"names":["React","Component","Selector","NumForm","rnSig","val","absErr","t","Math","ceil","log10","ord","floor","sig","toPrecision","parseFloat","toFixed","round","Infinity","ConstructString","err","errType","sign","notation","isNaN","resString","num","valStr","absErrStr","relErrDigits","toExponential","Calculator","constructor","props","handleValChange","setState","handleErrChange","handleErrTypeChange","handleSignChange","handleNotationChange","handleResultChange","str","state","selectors","id","lab","opt1","opt2","forms","plHold","prep","mess","readonly","render","handleCalc","changeButtonClass","classes","counter","value","formatCount"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,WAApB,C,CAEA;AACA;AACA;AACA;AACA;AACA;;;;AAGA,SAASC,KAAT,CAAeC,GAAf,EAAoBC,MAApB,EAA4B;AAAE;AAC5B,MAAIA,MAAM,GAAG,CAAT,IAAcA,MAAM,GAAGD,GAA3B,EAAgC;AAC9B,UAAME,CAAC,GAAGC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,KAAL,CAAW,MAAMJ,MAAjB,CAAV,CAAV,CAD8B,CACiB;;AAC/C,UAAMK,GAAG,GAAGH,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACE,KAAL,CAAWL,GAAX,CAAX,CAAZ,CAF8B,CAEU;;AACxC,UAAMQ,GAAG,GAAGF,GAAG,GAAGJ,CAAlB,CAH8B,CAGT;AACrB;AACA;;AACA,QAAIA,CAAC,IAAI,CAAT,EAAY;AACVF,MAAAA,GAAG,GAAGA,GAAG,CAACS,WAAJ,CAAgBD,GAAhB,CAAN,CADU,CACkB;;AAC5BR,MAAAA,GAAG,GAAGU,UAAU,CAACV,GAAD,CAAV,CAAgBW,OAAhB,CAAwBT,CAAxB,CAAN,CAFU,CAEwB;;AAClCD,MAAAA,MAAM,GAAGA,MAAM,CAACU,OAAP,CAAeT,CAAf,CAAT,CAHU,CAGkB;AAC7B,KAJD,MAKK;AACHF,MAAAA,GAAG,GAAGG,IAAI,CAACS,KAAL,CAAWZ,GAAG,GAAI,OAAO,CAACE,CAAD,GAAK,CAAZ,CAAlB,IAAsC,OAAO,CAACA,CAAD,GAAK,CAAZ,CAA5C;AACAD,MAAAA,MAAM,GAAGE,IAAI,CAACS,KAAL,CAAWX,MAAM,GAAI,MAAO,CAACC,CAA7B,IAAqC,MAAO,CAACA,CAAtD;AACD,KAd6B,CAe9B;;;AAEA,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,MAAM,EAAEA,MAFH;AAGLO,MAAAA,GAAG,EAAEA,GAAG,KAAKK,QAAR,GAAmB,CAAnB,GAAuBL,GAHvB;AAILN,MAAAA,CAAC,EAAEA,CAAC,KAAKW,QAAN,GAAiB,CAAjB,GAAqBX;AAJnB,KAAP;AAMD,GAvBD,MAwBK;AACH,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,MAAM,EAAE,EAFH;AAGLO,MAAAA,GAAG,EAAE,CAHA;AAILN,MAAAA,CAAC,EAAE;AAJE,KAAP;AAMD;AACF;;AAED,SAASY,eAAT,CAAyBd,GAAzB,EAA8Be,GAA9B,EAAmCC,OAAnC,EAA4CC,IAA5C,EAAkDC,QAAlD,EAA4D;AAC1D;AACA,MAAIC,KAAK,CAACT,UAAU,CAACV,GAAD,CAAX,CAAL,IAA0BmB,KAAK,CAACT,UAAU,CAACK,GAAD,CAAX,CAAnC,EAAsD;AACpD,WAAO,qDAAP;AACD,GAJyD,CAM1D;;;AACAf,EAAAA,GAAG,GAAGU,UAAU,CAACV,GAAD,CAAhB;AACAe,EAAAA,GAAG,GAAGL,UAAU,CAACK,GAAD,CAAhB;AACA,MAAId,MAAM,GAAG,CAAb;AAAA,MACEmB,SAAS,GAAG,EADd,CAT0D,CAY1D;;AACA,MAAIJ,OAAO,KAAK,MAAhB,EAAwB;AACtBf,IAAAA,MAAM,GAAGD,GAAG,GAAGe,GAAf;AACD,GAFD,MAGK;AACHd,IAAAA,MAAM,GAAGc,GAAT;AACD;;AACD,MAAId,MAAM,GAAG,CAAT,IAAcA,MAAM,GAAGD,GAA3B,EAAgC;AAC9B;AACA,UAAMqB,GAAG,GAAGtB,KAAK,CAACC,GAAD,EAAMC,MAAN,CAAjB,CAF8B,CAG9B;;AACA,UAAMqB,MAAM,GAAGD,GAAG,CAACrB,GAAnB,CAJ8B,CAIN;;AACxB,UAAMuB,SAAS,GAAGF,GAAG,CAACpB,MAAtB,CAL8B,CAKA;;AAC9BD,IAAAA,GAAG,GAAGU,UAAU,CAACV,GAAD,CAAhB,CAN8B,CAMP;;AACvBC,IAAAA,MAAM,GAAGS,UAAU,CAACT,MAAD,CAAnB,CAP8B,CAOD;;AAC7B,UAAMuB,YAAY,GAAG,CAACvB,MAAM,GAAI,MAAME,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACE,KAAL,CAAWJ,MAAX,CAAX,CAAjB,EAAkDU,OAAlD,CAA0D,CAA1D,CAArB,CAR8B,CAQoD;;AAElF,UAAMH,GAAG,GAAGa,GAAG,CAACb,GAAhB;AACA,UAAMN,CAAC,GAAGmB,GAAG,CAACnB,CAAd;;AAEA,QAAIe,IAAI,KAAK,GAAb,EAAkB;AAChB,UAAIC,QAAQ,KAAK,MAAjB,EAAyB;AACvBE,QAAAA,SAAS,GAAGpB,GAAG,CAACyB,aAAJ,KAAsBR,IAAtB,GAA6BhB,MAAM,CAACwB,aAAP,EAAzC;AACD,OAFD,MAGK;AACHL,QAAAA,SAAS,GAAGE,MAAM,GAAGL,IAAT,GAAgBM,SAA5B;AACD;AACF,KAPD,MAQK;AACH,UAAIL,QAAQ,KAAK,MAAjB,EAAyB;AACvBE,QAAAA,SAAS,GAAGpB,GAAG,CAACyB,aAAJ,KAAsB,GAAtB,GAA4BD,YAA5B,GAA2C,GAAvD;AACD,OAFD,MAGK;AACHJ,QAAAA,SAAS,GAAGpB,GAAG,GAAG,GAAN,GAAYwB,YAAZ,GAA2B,GAAvC;AACD;AACF;;AACD,WAAOJ,SAAP;AACD,GA9BD,MA+BK;AACH,WAAO,kDAAP;AACD;AACF;;KArDQN,e;;AAyDT,MAAMY,UAAN,SAAyB/B,KAAK,CAACC,SAA/B,CAAyC;AACvC+B,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN,EADiB,CAEjB;AACA;;AAHiB,SA+BnBC,eA/BmB,GA+BA7B,GAAD,IAAS;AACzB,WAAK8B,QAAL,CAAc;AAAE9B,QAAAA;AAAF,OAAd,EADyB,CAEzB;AACD,KAlCkB;;AAAA,SAoCnB+B,eApCmB,GAoCAhB,GAAD,IAAS;AACzB,WAAKe,QAAL,CAAc;AAAEf,QAAAA;AAAF,OAAd,EADyB,CAEzB;AACD,KAvCkB;;AAAA,SAyCnBiB,mBAzCmB,GAyCIhB,OAAD,IAAa;AACjC,WAAKc,QAAL,CAAc;AAAEd,QAAAA;AAAF,OAAd;AACD,KA3CkB;;AAAA,SA6CnBiB,gBA7CmB,GA6CChB,IAAD,IAAU;AAC3B,WAAKa,QAAL,CAAc;AAAEb,QAAAA;AAAF,OAAd;AACD,KA/CkB;;AAAA,SAiDnBiB,oBAjDmB,GAiDKhB,QAAD,IAAc;AACnC,WAAKY,QAAL,CAAc;AAAEZ,QAAAA;AAAF,OAAd;AACD,KAnDkB;;AAAA,SAqDnBiB,kBArDmB,GAqDGC,GAAD,IAAS;AAC5B,WAAKN,QAAL,CAAc;AAAEM,QAAAA;AAAF,OAAd;AACD,KAvDkB;;AAIjB,SAAKC,KAAL,GAAa;AACXrC,MAAAA,GAAG,EAAE,SADM;AACKe,MAAAA,GAAG,EAAE,EADV;AACcC,MAAAA,OAAO,EAAE,MADvB;AAC+BE,MAAAA,QAAQ,EAAE,MADzC;AACiDD,MAAAA,IAAI,EAAE,GADvD;AAEXqB,MAAAA,SAAS,EAAE,CACT;AAAEC,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,GAAG,EAAE,aAAd;AAA6BC,QAAAA,IAAI,EAAE,MAAnC;AAA2CC,QAAAA,IAAI,EAAE;AAAjD,OADS,EAET;AAAEH,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,GAAG,EAAE,kBAAd;AAAkCC,QAAAA,IAAI,EAAE,MAAxC;AAAgDC,QAAAA,IAAI,EAAE;AAAtD,OAFS,EAGT;AACEH,QAAAA,EAAE,EAAE,CADN;AAEEC,QAAAA,GAAG,EAAE,iBAFP;AAGEC,QAAAA,IAAI,EAAE,GAHR;AAIEC,QAAAA,IAAI,EAAE;AAJR,OAHS,CAFA;AAYXC,MAAAA,KAAK,EAAE,CACL;AACEJ,QAAAA,EAAE,EAAE,CADN;AAEEC,QAAAA,GAAG,EAAE,mBAFP;AAGEI,QAAAA,MAAM,EAAE,sBAHV;AAIEC,QAAAA,IAAI,EAAE,EAJR;AAKEC,QAAAA,IAAI,EAAE,kDALR;AAMEC,QAAAA,QAAQ,EAAE;AANZ,OADK,EASL;AAAER,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,GAAG,EAAE,QAAd;AAAwBI,QAAAA,MAAM,EAAE,mBAAhC;AAAqDC,QAAAA,IAAI,EAAE,GAA3D;AAAgEC,QAAAA,IAAI,EAAE,EAAtE;AAA0EC,QAAAA,QAAQ,EAAE;AAApF,OATK,EAUL;AAAER,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,GAAG,EAAE,mBAAd;AAAmCI,QAAAA,MAAM,EAAE,EAA3C;AAA+CC,QAAAA,IAAI,EAAE,EAArD;AAAyDC,QAAAA,IAAI,EAAE,EAA/D;AAAmEC,QAAAA,QAAQ,EAAE;AAA7E,OAVK,CAU8E;AAV9E;AAZI,KAAb;AAyBD;;AA4BD;AACAC,EAAAA,MAAM,GAAG;AACP,UAAMhD,GAAG,GAAG,KAAKqC,KAAL,CAAWrC,GAAvB;AACA,UAAMe,GAAG,GAAG,KAAKsB,KAAL,CAAWtB,GAAvB;AACA,UAAMC,OAAO,GAAG,KAAKqB,KAAL,CAAWrB,OAA3B;AACA,UAAMC,IAAI,GAAG,KAAKoB,KAAL,CAAWpB,IAAxB;AACA,UAAMC,QAAQ,GAAG,KAAKmB,KAAL,CAAWnB,QAA5B;AACA,UAAMkB,GAAG,GAAGtB,eAAe,CAACd,GAAD,EAAMe,GAAN,EAAWC,OAAX,EAAoBC,IAApB,EAA0BC,QAA1B,CAA3B;AACA;AAAA;AACE;AACA;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,iDAAf;AAAA,mCACE;AAAA,iQAIuD;AAAG,gBAAA,IAAI,EAAC,gDAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJvD;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eASE;AAAK,YAAA,SAAS,EAAC,uBAAf;AAAA,mCACE;AACE,cAAA,OAAO,EAAE,KAAK+B,UADhB,CAC4B;AAC1B;AACA;AACA;AAJF;AAKE,cAAA,SAAS,EAAC,uBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAsBE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,mCAEE,QAAC,OAAD;AAAiB,cAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWM,KAAX,CAAiB,CAAjB,CAAvB;AAA4C,cAAA,aAAa,EAAE,KAAKd,eAAhE;AAAiF,cAAA,GAAG,EAAE7B;AAAtF,eAAc,CAAd;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA,mCACE,QAAC,OAAD;AAAiB,cAAA,IAAI,EAAE,KAAKqC,KAAL,CAAWM,KAAX,CAAiB,CAAjB,CAAvB;AAA4C,cAAA,aAAa,EAAE,KAAKZ,eAAhE;AAAiF,cAAA,GAAG,EAAEhB;AAAtF,eAAc,CAAd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBANF,eASE;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA,mCAEE,QAAC,QAAD;AAAkB,cAAA,QAAQ,EAAE,KAAKsB,KAAL,CAAWC,SAAX,CAAqB,CAArB,CAA5B;AAAqD,cAAA,iBAAiB,EAAE,KAAKN;AAA7E,eAAe,CAAf;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF,eAoCE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,kCAEE;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,mCACE,QAAC,OAAD;AAAiB,cAAA,IAAI,EAAE,KAAKK,KAAL,CAAWM,KAAX,CAAiB,CAAjB,CAAvB;AAA4C,cAAA,iBAAiB,EAAE,KAAKR,kBAApE;AAAwF,cAAA,GAAG,EAAEC;AAA7F,eAAc,CAAd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFF,eAKE;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA,mCAEE,QAAC,QAAD;AAAkB,cAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWC,SAAX,CAAqB,CAArB,CAA5B;AAAqD,cAAA,iBAAiB,EAAE,KAAKJ;AAA7E,eAAe,CAAf;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBALF,eAYE;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA,mCAEE,QAAC,QAAD;AAAkB,cAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWC,SAAX,CAAqB,CAArB,CAA5B;AAAqD,cAAA,iBAAiB,EAAE,KAAKL;AAA7E,eAAe,CAAf;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,gBApCF,eA6DE;AAAI,UAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,gBA7DF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAkED,GApIsC,CAsIvC;;;AACAiB,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,OAAO,GAAG,iBAAd;AACAA,IAAAA,OAAO,IAAI,KAAKvB,KAAL,CAAWwB,OAAX,CAAmBC,KAAnB,KAA6B,CAA7B,GAAiC,SAAjC,GAA6C,WAAxD,CAFkB,CAEmD;;AACrE,WAAOF,OAAP;AACD,GA3IsC,CA6IvC;;;AACAG,EAAAA,WAAW,GAAG;AACZ;AACA,UAAM;AAAED,MAAAA,KAAK,EAAEA;AAAT,QAAmB,KAAKzB,KAAL,CAAWwB,OAApC;AACA,WAAOC,KAAK,KAAK,CAAV,GAAc,MAAd,GAAuBA,KAA9B,CAHY,CAGyB;AACrC;AACD,GAnJsC,CAqJvC;AACA;AACA;AACA;AACA;AACA;AACA;;;AA3JuC;;AA8JzC,eAAe3B,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Selector from \"./selector\";\nimport NumForm from \"./numform\";\n\n// function BoilingVerdict(props) {\n//   if (props.celsius >= 100) {\n//     return <p>The water would boil.</p>;\n//   }\n//   return <p>The water would not boil.</p>;\n// }\n\n\nfunction rnSig(val, absErr) { //round value to appropriate count of significant digits based on absolute error\n  if (absErr > 0 && absErr < val) {\n    const t = Math.ceil(Math.log10(0.5 / absErr)); //calc number of fractional significant digits based on absolute error\n    const ord = Math.floor(Math.log10(val)) //calc order of magnitude of the number\n    const sig = ord + t; //calc number of significant digits by adding t to order of magnitude of the number\n    // const exp_n = Math.floor(Math.log10(Math.abs(val))) + 1 - sig; //calc n-exponent for rounding the number\n    // val = (10 ** exp_n) * Math.round(val / (10 ** exp_n))\n    if (t >= 0) {\n      val = val.toPrecision(sig); //does the same as above - rounds to specified count of significant digits\n      val = parseFloat(val).toFixed(t); //keep decimal to match error (concat \"0\" where needed)\n      absErr = absErr.toFixed(t); //round absolute error to appropriate decimal places (to match val)\n    }\n    else {\n      val = Math.round(val / (10 ** (-t + 1))) * (10 ** (-t + 1));\n      absErr = Math.round(absErr / (10 ** (-t))) * (10 ** (-t));\n    }\n    // absErr = Math.round((absErr + Number.EPSILON) * 100) / 100 ///alternative is toPrecision(), much faster\n\n    return {\n      val: val,\n      absErr: absErr,\n      sig: sig === Infinity ? 0 : sig,\n      t: t === Infinity ? 0 : t\n    };\n  }\n  else {\n    return {\n      val: val,\n      absErr: \"\",\n      sig: 1,\n      t: 1\n    };\n  }\n}\n\nfunction ConstructString(val, err, errType, sign, notation) {\n  //check if inputs can be read as numbers\n  if (isNaN(parseFloat(val)) || isNaN(parseFloat(err))) {\n    return \"Please specify number and error: i.e. 1234 and 0.04\"\n  }\n\n  //convert user ipnut to float\n  val = parseFloat(val)\n  err = parseFloat(err)\n  let absErr = 0,\n    resString = \"\";\n\n  //calculate relative and absolute error\n  if (errType === \"Rel.\") {\n    absErr = val * err;\n  }\n  else {\n    absErr = err;\n  }\n  if (absErr > 0 && absErr < val) {\n    //round value to appropriate count of significant digits based on absolute error\n    const num = rnSig(val, absErr);\n    //read data from object returned by function rnSig\n    const valStr = num.val; //formatted string\n    const absErrStr = num.absErr; //formatted string\n    val = parseFloat(val); //rounded fp number\n    absErr = parseFloat(absErr); //rounded fp number\n    const relErrDigits = (absErr / (10 ** Math.floor(Math.log10(absErr)))).toFixed(0) //absolute error in form of string of least significant digits\n\n    const sig = num.sig;\n    const t = num.t;\n\n    if (sign === \"±\") {\n      if (notation === \"Sci.\") {\n        resString = val.toExponential() + sign + absErr.toExponential()\n      }\n      else {\n        resString = valStr + sign + absErrStr\n      }\n    }\n    else {\n      if (notation === \"Sci.\") {\n        resString = val.toExponential() + \"(\" + relErrDigits + \")\"\n      }\n      else {\n        resString = val + \"(\" + relErrDigits + \")\"\n      }\n    }\n    return resString\n  }\n  else {\n    return \"Number shall be greater than its absolute error!\"\n  }\n}\n\n\n\nclass Calculator extends React.Component {\n  constructor(props) {\n    super(props);\n    // this.handleValChange = this.handleValChange.bind(this); // used arrow functions instead\n    // this.handleErrChange = this.handleErrChange.bind(this); // used arrow functions instead\n    this.state = {\n      val: 1212.1212, err: 49, errType: \"Abs.\", notation: \"Std.\", sign: \"±\",\n      selectors: [\n        { id: 1, lab: \"Error type:\", opt1: \"Rel.\", opt2: \"Abs.\" },\n        { id: 2, lab: \"Number notation:\", opt1: \"Std.\", opt2: \"Sci.\" },\n        {\n          id: 3,\n          lab: \"Error notation:\",\n          opt1: \"±\",\n          opt2: \"()\",\n        },\n      ],\n      forms: [\n        {\n          id: 1,\n          lab: \"Number to format:\",\n          plHold: \"i.e. 1.23E+3 or 1230\",\n          prep: \"\",\n          mess: \"Use dot [.] or comma [,] as a decimal separator.\",\n          readonly: 0,\n        },\n        { id: 2, lab: \"Error:\", plHold: \"i.e. 3E-2 or 0.03\", prep: \"±\", mess: \"\", readonly: 0, },\n        { id: 3, lab: \"Formatted number:\", plHold: \"\", prep: \"\", mess: \"\", readonly: 1, }, //inValue: \"\",\n      ],\n    };\n  }\n\n  handleValChange = (val) => {\n    this.setState({ val });\n    // this.setState({ str });\n  }\n\n  handleErrChange = (err) => {\n    this.setState({ err });\n    // this.setState({ str });\n  }\n\n  handleErrTypeChange = (errType) => {\n    this.setState({ errType });\n  }\n\n  handleSignChange = (sign) => {\n    this.setState({ sign });\n  }\n\n  handleNotationChange = (notation) => {\n    this.setState({ notation });\n  }\n\n  handleResultChange = (str) => {\n    this.setState({ str });\n  }\n\n  // Render method\n  render() {\n    const val = this.state.val;\n    const err = this.state.err;\n    const errType = this.state.errType;\n    const sign = this.state.sign;\n    const notation = this.state.notation;\n    const str = ConstructString(val, err, errType, sign, notation)\n    return (\n      //IMPORTANT! Bulma's grid system is used to compy with Wordpress theme. Bootstrap is used for styling components.\n      <div>\n        <div className=\"columns\">\n          <div className=\"column is-9 has-text-justified is-hidden-mobile\">\n            <p>\n              This tool formats given number so that it is\n              rounded to appropiate number of significant digits based on given\n              uncertainty of the value. If you are interested in\n              formal and mathematical background, please visit the <a href=\"https://mmielcarek.com/en/mat/rounding_numbers\"> blog.</a>\n            </p>\n          </div>\n          <div className=\"column has-text-right\">\n            <button\n              onClick={this.handleCalc} //onDelete is a property of Counter component called in Counters component.\n              // Here only the property onDelete of the counter, defined in counters component is called - <raising event handlers>\n              // The reference must be given as an arrow function, as we need to pass an id of the counter to be deleted.\n              // If instead of \"this.props.counter.id\" we would add 1, always counter of id 1 would be deleted.\n              className=\"btn btn-warning w-100\"\n            >\n              Clear input\n            </button>\n          </div>\n        </div>\n        <div className=\"columns\">\n          <div className=\"column is-6\">\n            {/*---------------------------------------------------------------------INPUT - NUMBER*/}\n            <NumForm key={0} form={this.state.forms[0]} onInputChange={this.handleValChange} inp={val}></NumForm>\n          </div>\n          {/*---------------------------------------------------------------------INPUT - ERROR*/}\n          <div className=\"column\">\n            <NumForm key={1} form={this.state.forms[1]} onInputChange={this.handleErrChange} inp={err}></NumForm>\n          </div>\n          <div className=\"column\">\n            {/*---------------------------------------------------------------------SELECTOR - ERR*/}\n            <Selector key={0} selector={this.state.selectors[0]} onSelectionChange={this.handleErrTypeChange}></Selector>\n          </div>\n        </div>\n        <div className=\"columns\">\n          {/*---------------------------------------------------------------------INPUT - FORM. NUMBER*/}\n          <div className=\"column is-6\">\n            <NumForm key={2} form={this.state.forms[2]} onSelectionChange={this.handleResultChange} inp={str}></NumForm>\n          </div>\n          <div className=\"column\">\n            {/*---------------------------------------------------------------------SELECTOR - NUM NOTATION*/}\n            <Selector key={1} selector={this.state.selectors[1]} onSelectionChange={this.handleNotationChange}></Selector>\n            {/* {this.state.selectors.map((selector) => (\n              <Selector key={selector.id} selector={selector}></Selector>\n            ))} */}\n          </div>\n          <div className=\"column\">\n            {/*---------------------------------------------------------------------SELECTORS - ERR NOTATION*/}\n            <Selector key={2} selector={this.state.selectors[2]} onSelectionChange={this.handleSignChange}></Selector>\n          </div>\n        </div>\n        {/* <div className=\"columns\">\n          <div className=\"column is-6\">\n            <BoilingVerdict\n              celsius={parseFloat(val)} />\n          </div>\n        </div> */}\n\n        {/*---------------------------------------------------------------------DELETE BTN*/}\n        <hr className=\"w-100\" />\n      </div >\n    );\n  }\n\n  // Method to change button classes on click to make it a selector.\n  changeButtonClass() {\n    let classes = \"btn btn-sm btn-\";\n    classes += this.props.counter.value === 0 ? \"primary\" : \"secondary\"; // If counter value is 0 add \"Warning\", else add \"primary\".\n    return classes;\n  }\n\n  // Method to format counter based on value.\n  formatCount() {\n    // Object destructuring - picking a single property of an object and store it in a const.\n    const { value: value } = this.props.counter;\n    return value === 0 ? \"Zero\" : value; // Instead of plain text \"Zero\" it is also possible to return a JSX expression: <h1>Zero</h1>.\n    // Constant (const) can also store JSX expression. const x = <h1>Zero</h1>\n  }\n\n  ///////////////////////////////////////////////////////////\n  //   //[USAGE OF <componentDidMount>]\n  //   // Called after component is rendered into the DOM. Place to call data form the server.\n  //   componentDidMount() {\n  // //Ajax Call\n  //     this.setState({data from the server})\n  //   }\n}\n\nexport default Calculator;\n"]},"metadata":{},"sourceType":"module"}